<el-drawer title="CRUD设定"  :visible.sync="dialogSetupVisible" direction="btt"  :with-header="false" v-if="startRender" :modal="false">
<div style="padding: 10px"><el-form :model="setupform" ref="setupform"  size="mini" :inline="true"><el-tabs tab-position="left">
<el-tab-pane :label=v1 v-for="(v1,k1) in setupPanel"><el-form-item :label="v.label" v-for="(v, k) in setupform" v-if="v.p==k1">
<el-switch v-if="v.type=='switch'" v-model="setupform[k].value" :disabled="diyKeys.includes(k)"></el-switch>
<el-color-picker v-else-if="v.type=='color'" v-model="setupform[k].value" :disabled="diyKeys.includes(k)"></el-color-picker>
<el-input v-else-if="v.type=='input'" v-model="setupform[k].value" autocomplete="off" :placeholder="v.placeholder" :disabled="diyKeys.includes(k)"></el-input>
<el-input v-else-if="['input_list','input_dict','text_dict','text_dict2'].includes((setupKeyDict[k]||v.type))"  v-model="setupform[k].value" autocomplete="off" :placeholder="v.placeholder" :disabled="diyKeys.includes(k)"><template slot="suffix"><i class="el-icon-edit el-input__icon" @click="openDevDialog(k)" ></i></template></el-input>
<el-input v-else-if="v.type=='number'" type="number" v-model="setupform[k].value" style="width:60px" autocomplete="off" :placeholder="v.placeholder" :disabled="diyKeys.includes(k)"></el-input>
</el-form-item><div><el-button type="info" size="small" @click="save_crud(false)">预览</el-button><el-button type="warning" size="small" @click="save_crud(1)">保存</el-button><el-button type="danger" size="small" @click="save_crud(2)">发布</el-button></div>
</el-tab-pane><el-tab-pane label="模型管理"><el-row><el-input v-model="tableName" size="mini" style="width:150px" prefix-icon="el-icon-search" placeholder="输入表名[可选]"></el-input><el-button @click.prevent="searchfieldList" size="mini">查询</el-button>
<el-button @click.prevent="viewfieldList" size="mini">预览</el-button><el-button @click.prevent="save_crud(1)" size="mini">保存</el-button><el-popconfirm v-if="tableName" con-color="red" title="确认执行数据库操作,这是不可恢复的" @confirm="savefieldList"><el-button slot="reference" size="mini">执行</el-button></el-popconfirm>
</el-row><el-row :gutter="5" style="font-size: 12px"><el-col :span="3">字段名</el-col><el-col :span="3">备注</el-col><el-col :span="2">实际类型</el-col><el-col :span="1">默认</el-col><el-col :span="1">空</el-col>
<el-col :span="2">类型</el-col><el-col :span="2">对齐</el-col><el-col :span="2">宽度</el-col><el-col :span="6"><el-col :span="3">只读</el-col><el-col :span="3">新增</el-col><el-col :span="3">修改</el-col><el-col :span="3">必填</el-col>
<el-col :span="3">查询</el-col><el-col :span="3">过滤</el-col><el-col :span="3">长显</el-col><el-col :span="3">短显</el-col></el-col></el-row>
<div style="height: 50%"><el-row v-for="item in fieldList" :gutter="5" style="margin-bottom: 2px;" v-if="item.flag!==2"><el-col :span="3"><el-input v-model="item.name" size="mini"></el-input></el-col>
<el-col :span="3"><el-input v-model="item.comment" size="mini"></el-input></el-col><el-col :span="2"><el-input v-model="item.actualtype" size="mini"></el-input></el-col><el-col :span="1"><el-input v-model="item.default" size="mini"></el-input></el-col><el-col :span="1"><el-checkbox v-model="item.isnull" size="mini"></el-checkbox></el-col>
<el-col :span="2"><el-select v-model="item.type" size="mini" clearable><el-option  key="select" label="选择" value="select"></el-option><el-option  key="selects" label="多选" value="selects"></el-option>
<el-option  key="number" label="数字" value="number"></el-option><el-option  key="date" label="日期" value="date"></el-option><el-option  key="month" label="月份" value="date"></el-option><el-option  key="text" label="长文本" value="text"></el-option><el-option  key="file" label="文件" value="file"></el-option>
<el-option  key="img" label="图片" value="img"></el-option></el-select></el-col>
<el-col :span="2"><el-select v-model="item.align" size="mini" clearable><el-option  key="left" label="左" value="left"></el-option><el-option  key="right" label="右" value="right"></el-option></el-select></el-col>
<el-col :span="2"><el-input v-model="item.width" size="mini"></el-input></el-col><el-col :span="6"><el-col :span="3"><el-checkbox v-model="item.isconst" size="mini"></el-checkbox></el-col>
<el-col :span="3"><el-checkbox v-model="item.isadd" size="mini"></el-checkbox></el-col><el-col :span="3"><el-checkbox v-model="item.ismodify" size="mini"></el-checkbox></el-col>
<el-col :span="3"><el-checkbox v-model="item.isrequired" size="mini"></el-checkbox></el-col><el-col :span="3"><el-checkbox v-model="item.issearch" size="mini"></el-checkbox></el-col>
<el-col :span="3"><el-checkbox v-model="item.isfilter" size="mini"></el-checkbox></el-col><el-col :span="3"><el-checkbox v-model="item.isshows" size="mini"></el-checkbox></el-col><el-col :span="3"><el-checkbox v-model="item.isshow" size="mini"></el-checkbox></el-col>
</el-col><el-col :span="1"><el-button type="text" @click.prevent="removefieldList(item)" size="mini" icon="el-icon-delete"></el-button></el-col>
</el-row><el-row><el-button type="text" @click.prevent="addfieldList" size="small" icon="el-icon-circle-plus-outline">添加一行</el-button></el-row>
</div></el-tab-pane></el-tabs></el-form></div><div>
<el-dialog  :visible.sync="dialogDevFormVisible" width="60%" :append-to-body="true" :modal="true" :close-on-click-modal="false" :close-on-press-escape="false" :show-close="false">
<el-alert :title="devValue.key+devValue.msg" type="info" :description="setupform.nameDict.value||tableHead.join(',')" show-icon :closable="false"></el-alert><el-input  type="textarea" autosize v-model="devValue.value"></el-input>
<div slot="footer"><el-button @click="dialogDevFormVisible=false;dialogSetupVisible=true">取消</el-button><el-button type="primary" @click="saveDevValue">确定</el-button></div>
</el-dialog>
</div>

</el-drawer>